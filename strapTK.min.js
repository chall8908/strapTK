/*
 * Strap'd ToolKit v 0.6.2
 * Authored by Chris Hall
 * Copyright 2013 to Pangea Real Estate
 * Under a Creative Commons Attribution-ShareAlike 3.0 Unported License
 */
function Extend(e,t,n){var r;t&&_.has(t,"constructor")?r=t.constructor:r=function(){return e.apply(this,arguments)},_.extend(r,e,n);var i=function(){this.constructor=r};return i.prototype=e.prototype,r.prototype=new i,t&&_.extend(r.prototype,t),r.__super__=e.prototype,r}function Base(e,t){var n=e||{},r=t||{};for(attr in n)this[attr]=n[attr];this.initialize(r)}function Typify(e,t){t=_.extend({},Typify.defaults,t),e.setType=function(e){this.type&&(this.removeClass(this.base+"-"+this.type),delete this.type);if(e){if(!_.include(this.constructor.types,e))throw new RangeError("Invalid type - "+e);this.type=e,this.addClass(this.base+"-"+e)}},e.setDefaultValue.call(e.constructor,t.types,"types"),e.setDefaultValue(t.base,"base"),e.setDefaultValue(t.type,"type"),e.base&&e.addClass(e.base),e.type&&e.setType(e.type)}function HorizontalRule(){this.klass="HorizontalRule"}function LineBreak(){this.klass="LineBreak"}function Raw(e){this.body=e.body||e,this.klass="Raw"}var strap=function(){var e=function(t){var n=typeof t.tag!="undefined"&&typeof t.tag=="string",r=n?new Panel(t):new Component(t);return n&&(r.template=e.generateSimpleTemplate(t.tag)),r};return e.build=function(e){function t(e){var n,r=e.klass,i=e.children;return delete e.klass,delete e.children,n=new window[r](e),n.type&&!n.setType&&Typify(n),i&&_.isArray(i)&&i.length&&_(i).each(function(e){n.add(t(e))}),n}typeof e=="string"&&(e=JSON.parse(e));if(_.isArray(e)){var n=[];return _.each(e,function(e){n.push(t(e))}),n}return t(e)},e.generateSimpleTemplate=function(e){return _.template("<"+e+" <%= rootAttrs %>><%= yield %></"+e+">")},e}();Base.extend=function(e,t){return Extend(this,e,t)};var Component=Base.extend({constructor:function(e,t){_.isArray(e)&&(e={children:e}),Component.__super__.constructor.call(this,e,t)},initialize:function(e){this.setDefaultValue([],"children"),_.each(this.children,this.checkIfRenderable),this.setDefaultValue("","childPrefix","childSuffix"),this.klass=this.constructor.klass,$(this).on("after-render",function(e,t,n){var r=n||t;_.each(t.children,function(t){$(t).trigger(e,[t,r])})})},setDefaultValue:function(e,t){var n=Array.prototype.slice.call(arguments,1),r=_.isArray(e)?"apply":"call",i=_.isFunction(e);_.each(n,function(t){this.hasOwnProperty(t)||(this[t]=i?e:e.constructor[r](this,e))},this)},template:function(e){return e.yield},push:function(e){return this.checkIfRenderable(e),this.children.push(e),this},pop:function(){return this.children.pop()},unshift:function(e){return this.checkIfRenderable(e),this.children.unshift(e),this},shift:function(){return this.children.shift()},insert:function(e,t){return this.checkIfRenderable(e),t?this.children.splice(t,0,e):this.children.push(e),this},get:function(e){switch(typeof e){case"string":return this[e];case"number":return this.children[e]}throw TypeError("index must be a string or number.")},remove:function(e){return e?this.children.splice(e,1)[0]:this.pop()},flush:function(){var e=this.children;return this.children=[],e},checkIfRenderable:function(e){e.klass&&!e.render&&(e=strap.build(e));if(typeof e.render=="function")return;throw TypeError("Object does not respond to render.")},renderChildren:function(e,t){e||(e=this.childPrefix),t||(t=this.childSuffix);var n="";return _.each(this.children,function(r){n+=e+r.render()+t}),n},renderHash:function(){return{yield:this.renderChildren()}},render:function(){return this.template(this.renderHash())},toString:function(e){return e?JSON.stringify(this):this.render()},clone:function(){return strap.build(this.toString(!0))}},{klass:"Component"});Component.prototype.add=Component.prototype.push;var Panel=Component.extend({constructor:function(e,t){typeof e=="string"&&(e={body:e}),Panel.__super__.constructor.call(this,e,t)},initialize:function(e){Panel.__super__.initialize.call(this,e),this.setDefaultValue([],"classes","attributes"),this.setDefaultValue("","id","body"),_.each(["classes","attributes"],function(e){typeof this[e]=="string"&&(this[e]=_.uniq(this[e].split(" ")))},this)},el:function(){if(this.id)return $("#"+this.id)},addClass:function(){var e=Array.prototype.slice.call(arguments,0);return this.classes=_.union(this.classes,e),this},removeClass:function(){var e=[this.classes].concat(Array.prototype.slice.call(arguments,0));return this.classes=_.without.apply(this,e),this},toggleClass:function(){var e=Array.prototype.slice.call(arguments,0),t=_.intersection(this.classes,e);return this.classes=_.without(_.union(this.classes,e),t),this},listClasses:function(){return this.classes.join(" ")},listAttributes:function(){var e=Array.prototype.slice.call(arguments,0).concat(["id"]),t=this.attributes,n=this.listClasses(),r=_(e).map(function(e){return this[e]===""||typeof this[e]=="undefined"?!1:e+"='"+this[e]+"'"},this).compact().value();return n!==""&&r.push("class='"+n+"'"),_.isObject(t)&&!_.isArray(t)&&(t.data&&_.isObject(t)&&(_.each(t.data,function(e,n){t["data-"+n]=e}),delete t.data),t=_.map(t,function(e,t){return t+"='"+e+"'"})),_.union(t,r).join(" ")},template:strap.generateSimpleTemplate("div"),renderHash:function(){return{yield:this.body+this.renderChildren(),rootAttrs:this.listAttributes()}},render:function(e){var t=Panel.__super__.render.call(this);return e&&this.id&&$("#"+this.id).html(t).add(this).trigger("after-render",[this]),t}},{klass:"Panel"}),Div=Panel;Typify.defaults={types:[""],base:"",type:""};var AbstractBadge=Panel.extend({initialize:function(e){AbstractBadge.__super__.initialize.call(this,e),Typify(this)},template:strap.generateSimpleTemplate("span")},{klass:"AbstractBadge",types:["success","warning","important","info","inverse"]}),Accordion=Panel.extend({initialize:function(e){Accordion.__super__.initialize.call(this,e),this.addClass("accordion")},renderChildren:function(){var e="";return _.each(this.children,function(t,n){var r=this.id+"-"+n,i=t.heading;i&&i.render&&(i=i.render()),e+="<div class='accordion-group'><div class='accordion-heading'><a class='accordion-toggle' data-parent='#"+this.id+"' data-toggle='collapse' href='#"+r+"'>"+i+"</a>"+"</div>"+"<div class='accordion-body collapse"+(t.open?" in":"")+"' id='"+r+"'>"+"<div class='accordion-inner'>"+t.render()+"</div>"+"</div>"+"</div>"},this),e}},{klass:"Accordion"}),Alert=Panel.extend({initialize:function(e){Alert.__super__.initialize.call(this,e),this.base="alert",Typify(this)},isBlock:function(e){var t=_.include(this.classes,"alert-block");if(e===!0)t||this.addClass("alert-block");else{if(e!==!1)return t;t&&this.removeClass("alert-block")}},setClosable:function(e){var t=!1,n=-1;_.each(this.children,function(e,r){if(e instanceof CloseButton)return t=!0,n=r,!1}),e===!0||typeof e!="boolean"?(t===!1&&this.unshift(new CloseButton({attributes:["data-dismiss='alert'"]})),this.closable=!0):t&&this.remove(n)}},{klass:"Alert",types:["error","success","info"]}),Badge=AbstractBadge.extend({initialize:function(e){this.base="badge",Badge.__super__.initialize.call(this,e)}},{klass:"Badge"}),Breadcrumbs=Panel.extend({initialize:function(e){Breadcrumbs.__super__.initialize.call(this,e),this.childPrefix||(this.childPrefix="<li>"),this.childSuffix||(this.childSuffix="<span class='divider'>/</span></li>"),this.addClass("breadcrumb")},template:strap.generateSimpleTemplate("ul"),render:function(e){var t=Breadcrumbs.__super__.render.call(this).split(this.childSuffix),n=t.pop();return t=t.join(this.childSuffix)+n,e&&this.id&&$("#"+this.id).html(t),t}},{klass:"Breadcrumbs"}),Link=Panel.extend({initialize:function(e){Link.__super__.initialize.call(this,e),this.setDefaultValue("#","href")},listAttributes:function(){return FormSelect.__super__.listAttributes.call(this,"href")},template:strap.generateSimpleTemplate("a")},{klass:"Link"}),Button=Link.extend({initialize:function(e){Button.__super__.initialize.call(this,e),_.isArray(this.attributes)?this.attributes.unshift("type='button'"):this.attributes.type="button",this.base="btn",Typify(this)}},{klass:"Button",types:["primary","secondary","info","success","warning","danger","inverse","link"]}),ButtonGroup=Panel.extend({initialize:function(e){ButtonGroup.__super__.initialize.call(this,e),this.addClass("btn-group")}},{klass:"ButtonGroup"}),ButtonToolbar=Panel.extend({initialize:function(e){ButtonToolbar.__super__.initialize.call(this,e),this.addClass("btn-toolbar")}},{klass:"ButtonToolbar"}),Carousel=Panel.extend({initialize:function(e){Carousel.__super__.initialize.call(this,e),this.setDefaultValue(!0,"controls"),this.setDefaultValue("&lsaquo;","prevSymbol"),this.setDefaultValue("&rsaquo;","nextSymbol"),this.addClass("carousel","slide")},template:_.template("<div <%= rootAttrs %>><% if(controls) { %><ol class='carousel-indicators'><% _(slides).times(function(i){ %><li data-slide-to='<%= i %>' data-target='#<%= rootID %>' <%= i == 0 ? \"classes='active'\" : '' %>></li><% }); %></ol><% } %><div class='carousel-inner'><%= yield %></div><% if(controls) { %><a class='carousel-control left' data-slide='prev' href='#<%= rootID %>'><%= prevSymbol %></a><a class='carousel-control right' data-slide='next' href='#<%= rootID %>'><%= nextSymbol %></a><% } %></div>"),renderChildren:function(){var e="";return _.each(this.children,function(t,n){t.addClass("item"),n===0&&t.addClass("active"),e+=t.render()}),e},renderHash:function(){return _.extend(Carousel.__super__.renderHash.call(this),{rootID:this.id,controls:this.controls,slides:this.children.length,prevSymbol:this.prevSymbol,nextSymbol:this.nextSymbol})}},{klass:"Carousel"}),CloseButton=Link.extend({initialize:function(e){CloseButton.__super__.initialize.call(this,e),this.addClass("close"),this.body||(this.body="&times;")}},{klass:"CloseButton"}),ContentRow=Panel.extend({initialize:function(e){ContentRow.__super__.initialize.call(this,e),this.setDefaultValue(12,"maxChildren"),this.ensureChildLimit(),this.addClass("row-fluid")},push:function(e){this.ensureChildLimit(),ContentRow.__super__.push.call(this,e)},unshift:function(e){this.ensureChildLimit(),ContentRow.__super__.unshift.call(this,e)},insert:function(e,t){this.ensureChildLimit(),ContentRow.__super__.insert.call(this,e,t)},renderChildren:function(){var e,t=this.childPrefix,n=this.childSuffix,r=this.maxChildren,i=this.children.length,s="";return _.each(this.children,function(e){r-=e.span||0,i-=isNaN(e.span)?0:1}),e=Math.floor(r/i),_.each(this.children,function(r){var i=t+r.render()+n;r.klass==="Panel"&&!r.tag?(r.span!==0&&r.addClass("span"+(r.span||e)),i=r.render(),r.span!==0&&r.removeClass("span"+(r.span||e))):r.span!==0&&(i="<div class='span"+(r.span||e)+"'>"+i+"</div>"),s+=i}),s},ensureChildLimit:function(){if(this.children.length>=this.maxChildren)throw TooManyChildrenError("This row can only have "+this.maxChildren+" children")}},{klass:"ContentRow"}),List=Panel.extend({initialize:function(e){List.__super__.initialize.call(this,e),this.childPrefix||(this.childPrefix="<li>"),this.childSuffix||(this.childSuffix="</li>")},template:strap.generateSimpleTemplate("ul")},{klass:"List"}),DropdownMenu=List.extend({initialize:function(e){DropdownMenu.__super__.initialize.call(this,e),this.addClass("dropdown-menu")}},{klass:"DropdownMenu"}),Form=Panel.extend({initialize:function(e){Form.__super__.initialize.call(this,e),this.setDefaultValue("GET","method"),this.setDefaultValue("","action")},template:strap.generateSimpleTemplate("form"),listAttributes:function(){return FormSelect.__super__.listAttributes.call(this,"method","action")}},{klass:"Form"}),FormInput=Panel.extend({initialize:function(e){FormInput.__super__.initialize.call(this,e),this.setDefaultValue("","placeholder","name","value"),this.setDefaultValue("text","type"),this.base="input",Typify(this)},template:_.template("<input <%= rootAttrs %> />"),listAttributes:function(){return FormSelect.__super__.listAttributes.call(this,"type","placeholder","name","value")}},{klass:"FormInput",types:["button","checkbox","color","date","datetime","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"]}),FormLabel=Panel.extend({template:strap.generateSimpleTemplate("label")},{klass:"FormLabel"}),FormSelect=Panel.extend({template:strap.generateSimpleTemplate("select")},{klass:"FormSelect"}),Header=Panel.extend({initialize:function(e){Header.__super__.initialize.call(this,e),this.setDefaultValue(1,"level")},template:strap.generateSimpleTemplate("h<%= level %>"),renderHash:function(){return _.extend(Header.__super__.renderHash.call(this),{level:this.level})}},{klass:"Header"}),HeroUnit=Panel.extend({initialize:function(e){HeroUnit.__super__.initialize.call(this,e),this.setDefaultValue("","title"),this.addClass("hero-unit")},template:_.template("<div <%= rootAttrs %>><h1><%= title %></h1><%= yield %></div>"),renderHash:function(){return _.extend(HeroUnit.__super__.renderHash.call(this),{title:this.title})}},{klass:"HeroUnit"});HorizontalRule.prototype.render=function(){return"<hr/>"};var HR=HorizontalRule,Icon=Panel.extend({constructor:function(e,t){typeof e=="string"&&(e={type:e}),Icon.__super__.constructor.call(this,e,t)},initialize:function(e){Icon.__super__.initialize.call(this,e),this.base="icon",Typify(this)},template:_.template("<i <%= rootAttrs %>></i> <%= yield %>")},{klass:"Icon",types:["icon-adjust","icon-anchor","icon-archive","icon-asterisk","icon-ban-circle","icon-bar-chart","icon-barcode","icon-beaker","icon-beer","icon-bell","icon-bell-alt","icon-bolt","icon-book","icon-bookmark","icon-bookmark-empty","icon-briefcase","icon-bug","icon-building","icon-bullhorn","icon-bullseye","icon-calendar","icon-calendar-empty","icon-camera","icon-camera-retro","icon-certificate","icon-check","icon-check-empty","icon-check-minus","icon-check-sign","icon-circle","icon-circle-blank","icon-cloud","icon-cloud-download","icon-cloud-upload","icon-code","icon-code-fork","icon-coffee","icon-cog","icon-cogs","icon-collapse","icon-collapse-alt","icon-collapse-top","icon-comment","icon-comment-alt","icon-comments","icon-comments-alt","icon-compass","icon-credit-card","icon-crop","icon-dashboard","icon-desktop","icon-download","icon-download-alt","icon-edit","icon-edit-sign","icon-ellipsis-horizontal","icon-ellipsis-vertical","icon-envelope","icon-envelope-alt","icon-eraser","icon-exchange","icon-exclamation","icon-exclamation-sign","icon-expand","icon-expand-alt","icon-external-link","icon-external-link-sign","icon-eye-close","icon-eye-open","icon-facetime-video","icon-female","icon-fighter-jet","icon-film","icon-filter","icon-fire","icon-fire-extinguisher","icon-flag","icon-flag-alt","icon-flag-checkered","icon-folder-close","icon-folder-close-alt","icon-folder-open","icon-folder-open-alt","icon-food","icon-frown","icon-gamepad","icon-gear","icon-gears","icon-gift","icon-glass","icon-globe","icon-group","icon-hdd","icon-headphones","icon-heart","icon-heart-empty","icon-home","icon-inbox","icon-info","icon-info-sign","icon-key","icon-keyboard","icon-laptop","icon-leaf","icon-legal","icon-lemon","icon-level-down","icon-level-up","icon-lightbulb","icon-location-arrow","icon-lock","icon-magic","icon-magnet","icon-mail-forward","icon-mail-reply","icon-mail-reply-all","icon-male","icon-map-marker","icon-meh","icon-microphone","icon-microphone-off","icon-minus","icon-minus-sign","icon-minus-sign-alt","icon-mobile-phone","icon-money","icon-moon","icon-move","icon-music","icon-off","icon-ok","icon-ok-circle","icon-ok-sign","icon-pencil","icon-phone","icon-phone-sign","icon-picture","icon-plane","icon-plus","icon-plus-sign","icon-plus-sign-alt","icon-power-off","icon-print","icon-pushpin","icon-puzzle-piece","icon-qrcode","icon-question","icon-question-sign","icon-quote-left","icon-quote-right","icon-random","icon-refresh","icon-remove","icon-remove-circle","icon-remove-sign","icon-reorder","icon-reply","icon-reply-all","icon-resize-horizontal","icon-resize-vertical","icon-retweet","icon-road","icon-rocket","icon-rss","icon-rss-sign","icon-screenshot","icon-search","icon-share","icon-share-alt","icon-share-sign","icon-shield","icon-shopping-cart","icon-sign-blank","icon-signal","icon-signin","icon-signout","icon-sitemap","icon-smile","icon-sort","icon-sort-by-alphabet","icon-sort-by-alphabet-alt","icon-sort-by-attributes","icon-sort-by-attributes-alt","icon-sort-by-order","icon-sort-by-order-alt","icon-sort-down","icon-sort-up","icon-spinner","icon-star","icon-star-empty","icon-star-half","icon-star-half-empty","icon-star-half-full","icon-subscript","icon-suitcase","icon-sun","icon-superscript","icon-tablet","icon-tag","icon-tags","icon-tasks","icon-terminal","icon-thumbs-down","icon-thumbs-down-alt","icon-thumbs-up","icon-thumbs-up-alt","icon-ticket","icon-time","icon-tint","icon-trash","icon-trophy","icon-truck","icon-umbrella","icon-unchecked","icon-unlock","icon-unlock-alt","icon-upload","icon-upload-alt","icon-user","icon-volume-down","icon-volume-off","icon-volume-up","icon-warning-sign","icon-wrench","icon-zoom-in","icon-zoom-out","icon-bitcoin","icon-btc","icon-cny","icon-dollar","icon-eur","icon-euro","icon-gbp","icon-inr","icon-jpy","icon-krw","icon-renminbi","icon-rupee","icon-usd","icon-won","icon-yen","icon-align-center","icon-align-justify","icon-align-left","icon-align-right","icon-bold","icon-columns","icon-copy","icon-cut","icon-eraser","icon-file","icon-file-alt","icon-file-text","icon-file-text-alt","icon-font","icon-indent-left","icon-indent-right","icon-italic","icon-link","icon-list","icon-list-alt","icon-list-ol","icon-list-ul","icon-paper-clip","icon-paperclip","icon-paste","icon-repeat","icon-rotate-left","icon-rotate-right","icon-save","icon-strikethrough","icon-table","icon-text-height","icon-text-width","icon-th","icon-th-large","icon-th-list","icon-underline","icon-undo","icon-unlink","icon-angle-down","icon-angle-left","icon-angle-right","icon-angle-up","icon-arrow-down","icon-arrow-left","icon-arrow-right","icon-arrow-up","icon-caret-down","icon-caret-left","icon-caret-right","icon-caret-up","icon-chevron-down","icon-chevron-left","icon-chevron-right","icon-chevron-sign-down","icon-chevron-sign-left","icon-chevron-sign-right","icon-chevron-sign-up","icon-chevron-up","icon-circle-arrow-down","icon-circle-arrow-left","icon-circle-arrow-right","icon-circle-arrow-up","icon-double-angle-down","icon-double-angle-left","icon-double-angle-right","icon-double-angle-up","icon-hand-down","icon-hand-left","icon-hand-right","icon-hand-up","icon-long-arrow-down","icon-long-arrow-left","icon-long-arrow-right","icon-long-arrow-up","icon-backward","icon-eject","icon-fast-backward","icon-fast-forward","icon-forward","icon-fullscreen","icon-pause","icon-play","icon-play-circle","icon-play-sign","icon-resize-full","icon-resize-small","icon-step-backward","icon-step-forward","icon-stop","icon-youtube-play","icon-adn","icon-android","icon-apple","icon-bitbucket","icon-bitbucket-sign","icon-bitcoin","icon-btc","icon-css3","icon-dribbble","icon-dropbox","icon-facebook","icon-facebook-sign","icon-flickr","icon-foursquare","icon-github","icon-github-alt","icon-github-sign","icon-gittip","icon-google-plus","icon-google-plus-sign","icon-html5","icon-instagram","icon-linkedin","icon-linkedin-sign","icon-linux","icon-maxcdn","icon-pinterest","icon-pinterest-sign","icon-renren","icon-skype","icon-stackexchange","icon-trello","icon-tumblr","icon-tumblr-sign","icon-twitter","icon-twitter-sign","icon-vk","icon-weibo","icon-windows","icon-xing","icon-xing-sign","icon-youtube","icon-youtube-play","icon-youtube-sign","icon-ambulance","icon-h-sign","icon-hospital","icon-medkit","icon-plus-sign-alt","icon-stethoscope","icon-user-md"]}),Img=Panel.extend({initialize:function(e){Img.__super__.initialize.call(this,e),this.setDefaultValue(this.body,"src")},template:_.template("<img <%= rootAttrs %> />"),listAttributes:function(){return Img.__super__.listAttributes.call(this,"src")}},{klass:"Img"}),Label=AbstractBadge.extend({initialize:function(e){this.base="label",Label.__super__.initialize.call(this,e)}},{klass:"Label"}),Legend=Panel.extend({template:strap.generateSimpleTemplate("legend")},{klass:"Legend"});LineBreak.prototype.render=function(){return"<br/>"};var BR=LineBreak,Modal=Panel.extend({initialize:function(e){Modal.__super__.initialize.call(this,e),this.setDefaultValue([],"actions"),this.setDefaultValue("","header"),this.setDefaultValue(!1,"closable"),this.addClass("modal")},template:_.template("<div <%= rootAttrs %>><% if(closable || header) { %><div class='modal-header'><% if(closable) { %><button aria-hidden='true' class='close' data-dismiss='modal' type='button'>&times;</button><% } %><%= header %></div><% } %><div class='modal-body'><%= yield%></div><% if(actions) { %><div class='modal-footer'><%= actions %></div><% } %></div>"),pushAction:function(e){return this.actions.push(e),this},popAction:function(){return this.actions.pop()},shiftAction:function(e){return this.actions.shift()},unshiftAction:function(e){return this.actions.unshift(e),this},renderActions:function(){var e="";return _.each(this.actions,function(t){e+=t.render()}),e},renderHash:function(){return _.extend(Modal.__super__.renderHash.call(this),{header:this.header.render?this.header.render():this.header,actions:this.renderActions(),closable:this.closable})}},{klass:"Modal"});Modal.prototype.addAction=Modal.prototype.pushAction;var Nav=List.extend({initialize:function(e){Nav.__super__.initialize.call(this,e),this.setDefaultValue(!1,"divided"),this.base="nav",Typify(this)},renderChildren:function(e,t){e||(e=this.childPrefix),t||(t=this.childSuffix);var n="";return _.each(this.children,function(r,i){i&&this.divided&&(n+="<li class='divider-vertical'></li>"),r.tag==="li"?n+=r.render():n+=(r.active?e.replace(/>$/," class='active'>"):e)+r.render()+t},this),n},divide:function(e){return e?this.divided=!0:e===!1&&(this.divided=!1),this.divided}},{klass:"Nav",types:["tabs","pills","list"]}),NavBar=Panel.extend({initialize:function(e){NavBar.__super__.initialize.call(this,e),this.addClass("navbar")},renderChildren:function(){return"<div class='navbar-inner'>"+NavBar.__super__.renderChildren.call(this)+"</div>"}},{klass:"NavBar"}),OptGroup=Panel.extend({initialize:function(e){OptGroup.__super__.initialize.call(this,e),this.setDefaultValue("","label")},template:strap.generateSimpleTemplate("optgroup"),listAttributes:function(){return FormSelect.__super__.listAttributes.call(this,"label")}},{klass:"OptGroup"}),PageHeader=Header.extend({initialize:function(e){PageHeader.__super__.initialize.call(this,e),this.setDefaultValue("","header"),this.addClass("page-header")},template:_.template("<div <%= rootAttrs %>><h<%= level %>><%= header %> <small><%= yield %></small></h<%= level %>></div>"),renderHash:function(){return _.extend(PageHeader.__super__.renderHash.call(this),{header:this.header,level:this.level})}},{klass:"PageHeader"}),Pagination=Panel.extend({initialize:function(e){if(this.children&&this.pages)throw new SyntaxError("Paginators cannot accept both children and pages");Pagination.__super__.initialize.call(this,e),this.setDefaultValue(1,"pages","currentPage"),this.setDefaultValue(Infinity,"maxPages"),this.setDefaultValue(!0,"prevNext"),this.setDefaultValue(!1,"firstLast"),this.childPrefix="<li>",this.childSuffix="</li>",this.addClass("pagination"),this.children.length===0&&this.buildPages();if(this.id){var t=this;$(function(){$("body").on("click","#"+t.id+" a",function(e){e.preventDefault();if(!$(this).parent().is(".active, .disabled")){var n=$(this);switch(n.attr("class")){case"first":t.currentPage=1;break;case"prev":t.currentPage--;break;case"next":t.currentPage++;break;case"last":t.currentPage=t.pages;break;default:t.currentPage=parseInt(n.text(),10)}t.buildPages(),t.render(!0),t.onPage&&t.onPage.call(t,e,t.currentPage,this),$(t).trigger("page",[t.currentPage,this])}})})}$(this).on("after-render",function(e,t){var n=t.el();n.find("li").filter(function(){return $(this).find("a").text().match(t.currentPage)}).addClass("active"),t.currentPage===1?n.find(".first, .prev").parent().addClass("disabled"):t.currentPage===t.pages&&n.find(".last, .next").parent().addClass("disabled")})},renderChildren:function(){return"<ul>"+Pagination.__super__.renderChildren.call(this)+"</ul>"},setPages:function(e){this.pages=e,this.buildPages()},buildPages:function(){var e,t,n;this.children=[],this.pages>1?(e=Math.min(this.maxPages,this.pages),n=Math.floor(e/2),t=Math.max(this.currentPage-n,1),t=Math.min(t,this.pages-e+1),t=Math.floor(t),_.times(e,function(e){this.add(new Link(e+t+""))},this),this.pages>e&&(this.currentPage-n>1&&this.unshift(new Span("...")),this.pages-this.currentPage>n&&this.add(new Span("..."))),this.prevNext&&(this.unshift(new Link({classes:"prev",children:[new Icon({type:"angle-left"})]})),this.add(new Link({classes:"next",children:[new Icon({type:"angle-right"})]}))),this.firstLast&&(this.unshift(new Link({classes:"first",children:[new Icon({type:"double-angle-left"})]})),this.add(new Link({classes:"last",children:[new Icon({type:"double-angle-right"})]})))):console.warn("Paginator set to have less than 2 pages.  Pagination not will not display.")}},{klass:"Pagination"}),Paragraph=Panel.extend({template:strap.generateSimpleTemplate("p")},{klass:"Paragraph"}),P=Paragraph,ProgressBar=Panel.extend({initialize:function(e){ProgressBar.__super__.initialize.call(this,e),this.setDefaultValue(100,"width"),this.setWidth(this.width),this.base="bar",Typify(this)},setWidth:function(e){if(e>100)throw new RangeError("cannot set width greater than 100%");if(e<0)throw new RangeError("cannot set width less than 0%");var t=this.width;this.width=e,this.attributes=_.reject(this.attributes,function(e){return e.match(/style/i)}).concat(["style='width: "+e+"'"]),t!==e&&$(this).trigger("progressbar.width-change",e,t)}},{klass:"ProgressBar",types:["info","success","warning","danger"]});Raw.prototype.render=function(){return this.body};var SelectOption=Panel.extend({initialize:function(e){SelectOption.__super__.initialize.call(this,e),this.setDefaultValue(this.body,"value")},template:strap.generateSimpleTemplate("option"),listAttributes:function(){return FormSelect.__super__.listAttributes.call(this,"value")}},{klass:"SelectOption"}),Source=Panel.extend({initialize:function(e){Source.__super__.initialize.call(this,e),this.setDefaultValue("","src","parentID"),this.setDefaultValue({},"data"),typeof this.template=="string"&&(this.template=_.template(this.template))},template:function(){throw"Not Defined"},render:function(e){var t,n=this.data.call?this.data.call(this):this.data,r=this.body+this.renderChildren();return _.isArray(n)||(n=[n]),t=_.map(n,function(e,t){return this.template({yield:r,data:e,index:t,rootAttrs:this.listAttributes()})},this).join(""),e&&this.parentID&&$("#"+this.parentID).html(t).add(this).trigger("after-render",[this]),t}},{klass:"Source"}),Span=Panel.extend({template:strap.generateSimpleTemplate("span")},{klass:"Span"}),Table=Panel.extend({initialize:function(e){this.setDefaultValue([],"head","body","foot"),Table.__super__.initialize.call(this,e),this.addClass("table"),this.attributes.unshift("style='color: inherit'"),_.each(this.children,this.throwUnlessRow)},push:function(e){this.throwUnlessRow(e),Table.__super__.push.call(this,e)},unshift:function(e){this.throwUnlessRow(e),Table.__super__.unshift.call(this,e)},insert:function(e,t){this.throwUnlessRow(e),Table.__super__.insert.call(this,e,t)},throwUnlessRow:function(e){if(e instanceof TableRow||e instanceof Source||e.tag&&(e.tag=="thead"||e.tag=="tfoot"||e.tag=="tbody"))return;throw new TypeError("Invalid child type: "+e.klass+".  Must be either TableRow or Source.")},renderChildren:function(e,t){return this.children.length||_.isString(this.body)?Table.__super__.renderChildren():(new Component([strap({tag:"thead",children:this.head}),strap({tag:"tfoot",children:this.foot}),strap({tag:"tbody",children:this.body})])).render()},template:strap.generateSimpleTemplate("table")},{klass:"Table"});Table.prototype.add=Table.prototype.push;var TableCell=Panel.extend({template:strap.generateSimpleTemplate("td")},{klass:"TableCell"}),TableHeader=Panel.extend({template:strap.generateSimpleTemplate("th")},{klass:"TableHeader"}),TableRow=Panel.extend({initialize:function(e){TableRow.__super__.initialize.call(this,e),_.each(this.children,this.throwUnlessCell)},push:function(e){this.throwUnlessCell(e),TableRow.__super__.push.call(this,e)},unshift:function(e){this.throwUnlessCell(e),TableRow.__super__.unshift.call(this,e)},insert:function(e,t){this.throwUnlessCell(e),TableRow.__super__.insert.apply(this,arguments)},throwUnlessCell:function(e){if(e instanceof TableCell||e instanceof TableHeader)return;throw new TypeError("Rows can only have Cells as children")},template:strap.generateSimpleTemplate("tr")},{klass:"TableRow"});TableRow.prototype.add=TableRow.prototype.push;var Textarea=Panel.extend({initialize:function(e){Textarea.__super__.initialize.call(this,e),this.setDefaultValue("","placeholder")},template:strap.generateSimpleTemplate("textarea"),listAttributes:function(){return Textarea.__super__.listAttributes.call(this,"placeholder")}},{klass:"Textarea"}),Viewport=Component.extend({initialize:function(e){Viewport.__super__.initialize.call(this,e),this.setDefaultValue("body","root")},flush:function(){Viewport.__super__.flush.call(this),this.render()},el:function(){return $(this.root)},render:function(){return $(this.root).html(this.renderChildren()).add(this).trigger("after-render",[this])}},{klass:"Viewport"}),TooManyChildrenError=Extend(Error,{message:"Too many children.",name:"TooManyChildrenError"}),WebsocketConnectError=Extend(Error,{message:"Unable to connect via websocket.",name:"WebsocketConnectError"});
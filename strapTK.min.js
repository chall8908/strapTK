function Typify(e){e.setType=function(e){this.type&&(this.classes=_.without(this.classes,this.base+"-"+this.type),delete this.type);if(e){if(!_.include(this.types,e))throw new RangeError("Invalid type");this.type=e,this.classes.push(this.base+"-"+e)}},e.hasOwnProperty("types")||(e.types=[]),_.each(["base","type"],function(e){this.hasOwnProperty(e)||(this[e]="")},e),e.base&&e.classes.unshift(e.base),e.type&&e.setType(e.type)}function Base(e,t){var n=e||{},r=t||{};for(attr in n)this[attr]=n[attr];this.initialize(r)}function Raw(e){this.text=e}_.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{\=([\s\S]+?)\}\}/g},Base.extend=function(e,t){var n=this,r;e&&_.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},_.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&_.extend(r.prototype,e),r.__super__=n.prototype,r};var Component=Base.extend({initialize:function(e){this.hasOwnProperty("children")||(this.children=[]),_.each(["childPrefix","childSuffix"],function(e){this.hasOwnProperty(e)||(this[e]="")},this)},template:function(e){return e.yield},push:function(e){return this.children.push(e),this},pop:function(){return this.children.pop()},unshift:function(e){return this.children.unshift(e),this},shift:function(){return this.children.shift()},insert:function(e,t){return t?this.children.splice(t,0,e):this.children.push(e),this},remove:function(e){e?this.children.splice(e,1):this.pop()},addClass:function(e){_.include(this.classes,e)||this.classes.push(e)},removeClass:function(e){this.classes=_.without(this.classes,e)},toggleClass:function(e){_.include(this.classes,e)?this.removeClass(e):this.addClass(e)},renderChildren:function(e,t){e||(e=this.childPrefix),t||(t=this.childSuffix);var n="";return _.each(this.children,function(r){n+=e+r.render()+t}),n},render:function(){return this.template({yield:this.renderChildren()})}});Component.prototype.add=Component.prototype.push;var Viewport=Component.extend({initialize:function(e){Viewport.__super__.initialize.call(this,e),this.hasOwnProperty("root")||(this.root="body")},render:function(){$(this.root).empty().append(this.renderChildren())}}),Panel=Component.extend({initialize:function(e){Panel.__super__.initialize.call(this,e),_.each(["classes","attributes","id","body"],function(e,t){this.hasOwnProperty(e)||(this[e]=t<2?[]:"")},this)},template:_.template("<div id='{{= rootID }}' class='{{= rootClasses }}' {{= rootAttrs }}>{{= yield }}</div>"),render:function(){var e=this.body+this.renderChildren();return this.template({yield:e,rootAttrs:this.attributes.join(" "),rootClasses:this.classes.join(" "),rootID:this.id})},wellify:function(){_.include(this.classes,"well")||this.classes.push("well")},dewellify:function(){this.classes=_.without(this.classes,"well")},welled:function(e){if(!e&&e!==!1)return _.include(this.classes,"well");e?this.wellify():this.dewellify()},setClosable:function(e){this.closable=typeof e=="boolean"?e:!0}}),AbstractBadge=Panel.extend({initialize:function(e){AbstractBadge.__super__.initialize.call(this,e),this.types=["success","warning","important","info","inverse"],Typify(this)},template:_.template("<span id='{{= rootID }}' class='{{= rootClasses }}' {{= rootAttrs }}>{{= yield }}</span>")}),Alert=Panel.extend({types:["error","success","info"],initialize:function(e){Alert.__super__.initialize.call(this,e),this.base="alert",Typify(this)},template:_.template("<div id='{{= rootID }}' class='{{= rootClasses }}' {{= rootAttrs }}>{{ if(closable) { }}<button class='close' data-dismiss='alert' type='button'>&times;</button>{{ } }}<strong>{{= title}}</strong>{{= yield}}</div>"),render:function(){var e=this.body+this.renderChildren();return this.template({yield:e,title:this.title,closable:this.closable,rootID:this.id,rootClasses:this.classes.join(" "),rootAttrs:this.attributes.join(" ")})},isBlock:function(e){var t=_.include(this.classes,"alert-block");if(e)t||this.classes.push("alert-block");else{if(e!==!1)return t;t&&(this.classes=_.without(this.classes,"alert-block"))}}}),Badge=AbstractBadge.extend({initialize:function(e){this.base="badge",Badge.__super__.initialize.call(this,e)}}),Breadcrumbs=Panel.extend({initialize:function(e){Breadcrumbs.__super__.initialize.call(this,e),this.childPrefix||(this.childPrefix="<li>"),this.childSuffix||(this.childSuffix="<span class='divider'>/</span></li>"),this.classes.unshift("breadcrumb")},template:_.template("<ul id='{{= rootID }}' class='{{= rootClasses }}' {{= rootAttrs }}>{{= yield }}</ul>"),render:function(){var e=Breadcrumbs.__super__.render.call(this).split("<span class='divider'>/</span>"),t=e.pop();return e.join("<span class='divider'>/</span>")+t}}),Button=Link.extend({types:["primary","info","success","warning","danger","inverse","link"],initialize:function(e){Button.__super__.initialize.call(this,e);var t=!1;_.each(this.attributes,function(e){if(e.match(/^type/))return t=!0,!1}),t||this.attributes.push("type='button"),this.base="btn",Typify(this)}}),ButtonGroup=Panel.extend({initialize:function(e){this.__super__.initialize.call(this,e),this.classes.unshift("btn-group")}}),ButtonToolbar=Panel.extend({initialize:function(e){this.__super__.initialize.call(this,e),this.classes.unshift("btn-toolbar")}}),CloseButton=Link.extend({initialize:function(e){this.__super__.initialize.call(this,e),this.classes.unshift("close"),this.hasOwnProperty("body")||(this.body="&times;")}}),Dropdown=Panel.extend({initialize:function(e){this.__super__.initialize.call(this,e),this.childPrefix||(this.childPrefix="<li><a>"),this.childSuffix||(this.childSuffix="</a></li>")},template:_.template("<ul id='{{= rootID }}' class='dropdown-menu {{= rootClasses }}' {{= rootAttrs }}>{{= yield }}</ul>")}),HeroUnit=Component.extend({initialize:function(e){this.__super__.initialize.call(this,e),this.hasOwnProperty("title")||(this.title=""),this.classes.unshift("hero-unit")},template:_.template("<div id='{{= rootID }}' class='{{= rootClasses }}' {{= rootAttrs }}><h1>{{= title}}</h1>{{= yield}}</div>"),render:function(){var e=this.body+this.renderChildren();return this.template({yield:e,title:this.title,rootID:this.id,rootClasses:this.classes.join(" "),rootAttrs:this.attributes.join(" ")})}}),Label=AbstractBadge.extend({initialize:function(e){this.base="label",Label.__super__.initialize.call(this,e)}}),Link=Panel.extend({initialize:function(e){Link.__super__.initialize.call(this,e);var t=!1;_.each(this.attributes,function(e){if(e.match(/^href/))return t=!0,!1}),t||this.attributes.push("href='#'")},template:_.template("<a id='{{= rootID }}' class='{{= rootClasses }}' {{= rootAttrs }}>{{= yield }}</a>")}),Modal=Panel.extend({initialize:function(e){Modal.__super__.initialize.call(this,e),this.hasOwnProperty("actions")||(this.actions=[]),this.hasOwnProperty("header")||(this.header="")},template:_.template("<div id='{{= rootID }}' class='modal hide fade {{= rootClasses }}'><div class='modal-header'>{{ if(closable) { }}<button aria-hidden='true' class='close' data-dismiss='modal' type='button'>&times;</button>{{ } }}<h3>{{= header }}</h3></div><div class='modal-body'>{{= yield}}</div><div class='modal-footer'>{{= actions }}</div></div>"),pushAction:function(e){return this.actions.push(e),this},popAction:function(){return this.actions.pop()},shiftAction:function(e){return this.actions.shift()},unshiftAction:function(e){return this.actions.unshift(e),this},render:function(){var e=this.body,t="";return _.each(this.children,function(t){e+=t.render()}),_.each(this.actions,function(e){t+=e.render()}),this.template({yield:e,header:this.header,actions:t,rootID:this.id,rootClasses:this.classes.join(" ")})}});Modal.prototype.addAction=Modal.prototype.pushAction;var Nav=Panel.extend({types:["tabs","pills","list"],initialize:function(e){Nav.__super__.initialize.call(this,e),this.childPrefix===""&&(this.childPrefix="<li>"),this.childSuffix===""&&(this.childSuffix="</li>"),this.base="nav",Typify(this)},template:_.template("<ul id='{{= rootID }}' class='{{= rootClasses }}' {{= rootAttrs }}>{{= yield }}</ul>")}),NavBar=Panel.extend({initialize:function(e){NavBar.__super__.initialize.call(this,e),this.classes.unshift("navbar")},renderChildren:function(){return"<div class='navbar-inner'>"+NavBar.__super__.renderChildren.call(this)+"</div>"}}),PageHeader=Panel.extend({initialize:function(e){PageHeader.__super__.initialize.call(this,e),this.hasOwnProperty("header")||(this.header="")},template:_.template("<div id='{{= rootID }}' class='{{= rootClasses }}' {{= rootAttrs }}><h1>{{= header}} <small>{{= yield}}</small></h1></div>"),render:function(){var e=this.body+this.renderChildren();return this.template({yield:e,header:this.header,rootID:this.id,rootClasses:this.classes.join(" "),rootAttrs:this.attributes.join(" ")})}}),Pagination=Panel.extend({initialize:function(e){Pagination.__super__.initialize.call(this,e),this.hasOwnProperty("pages")||(this.pages=0),this.childPrefix===""&&(this.childPrefix="<li>"),this.childSuffix===""&&(this.childSuffix="</li>"),this.classes.unshift("pagination"),this.children.length===0&&(this.add(new Link({body:"&laquo;",classes:["prev"]})),_(this.pages).times(function(e){this.add(new Link({body:e+1}))},this),this.add(new Link({body:"&raquo;",classes:["next"]})))},renderChildren:function(){return"<ul>"+Pagination.__super__.renderChildren.call(this)+"</ul>"}}),ProgressBar=Panel.extend({types:["info","success","warning","danger"],initialize:function(e){ProgressBar.__super__.initialize.call(this,e),this.hasOwnProperty("width")||(this.width=100),this.setWidth(this.width),this.base="bar",Typify(this)},setWidth:function(e){if(e>100)throw new RangeError("cannot set width greater than 100%");if(e<0)throw new RangeError("cannot set width less than 0%");var t=this.width;this.width=e,this.attributes=_.reject(this.attributes,function(e){return e.match(/style/i)}).concat(["style='width: "+e+"'"]),t!==e&&$(this).trigger("progressbar.width-change",e,t)}});Raw.prototype.render=function(){return this.text};